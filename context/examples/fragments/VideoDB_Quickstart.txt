# IPYNB Notebook: VideoDB Quickstart [Source Link](https://github.com/video-db/videodb-cookbook/blob/main/quickstart/VideoDB%20Quickstart.ipynb)

```python
# âš¡ï¸ QuickStart: VideoDB

# [![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/video-db/videodb-cookbook/blob/main/quickstart/VideoDB%20Quickstart.ipynb)

# This notebook provides a hands-on introduction to [VideoDB](https://videodb.io), enabling you to quickly upload, index, search, and stream video content.

# ### Setup
# ---

# #### ðŸ”§ Install VideoDB

# Install the VideoDB Python package:

# ```python
# !pip install -U videodb
# ```

# #### ðŸ”— Connect to VideoDB

# Establish a connection to VideoDB using your API key. You can provide the key directly or set the `VIDEO_DB_API_KEY` environment variable.

# > ðŸ’¡ Get your API key from the [VideoDB Console](https://console.videodb.io) (Free for the first 50 uploads, no credit card required!).

# ```python
import videodb
import os
from getpass import getpass

api_key = getpass("Please enter your VideoDB API Key: ")
os.environ["VIDEO_DB_API_KEY"] = api_key

conn = videodb.connect()
# ```

# ### Working with a Single Video
# ---

# #### â¬†ï¸ Upload a Video

# Upload videos using `conn.upload()`. You can upload media from a public URL or a local file path. The `upload` function returns a `Video` object for accessing video methods.

# ```python
# Upload a video by URL
video = conn.upload(url="https://www.youtube.com/watch?v=wU0PYcCsL6o")
# ```

# > VideoDB simplifies uploads by supporting links from YouTube, S3, and any public URL with a video.

# #### ðŸ“º View Your Video

# Videos are instantly available for viewing in 720p resolution.

# *   Generate a streamable URL using `video.generate_stream()`.
# *   Preview the video using `video.play()`. This opens the video in your default browser/notebook.

# ```python
video.generate_stream()
video.play()
# ```

# #### âœ‚ï¸ Get Specific Sections of Videos

# Clip specific sections of a video by providing start and end times (in seconds) to the `timeline` argument.

# For example, stream the first 10 seconds and then from 120 to 140 seconds:

# ```python
stream_link = video.generate_stream(timeline=[[0, 10], [120, 140]])


def play_stream(stream_link):
    print(
        stream_link
    )  # Replace with a proper video player implementation if needed


play_stream(stream_link)
# ```

# #### ðŸ” Indexing a Video

# Index a video to enable searching within its content. VideoDB currently offers two index types:

# 1.  `index_spoken_words`: Indexes spoken words in the video, automatically generating a transcript for search. Supports 20+ languages (see [Language Support](https://docs.videodb.io/language-support-79)).
# 2.  `index_scenes`: Indexes visual information and events in the video. Ideal for finding scenes, activities, objects, and emotions (see [Scene Index Documentation](https://docs.videodb.io/scene-index-documentation-80)).

# > Indexing may take time for longer videos.

# ```python
# Index spoken content of the video
video.index_spoken_words()
# ```

# ```python
# Index visual information in video frames. Adjust the prompt according to your use case.
# You can index a video multiple times with different prompts.
index_id = video.index_scenes(
    prompt="Describe the scene in strictly 100 words"
)

# Wait for indexing to finish (optional)
scene_index = video.get_scene_index(index_id)
scene_index
# ```

# #### Search inside a video

# Search indexed videos using `video.search()`. Options include search type and index type. VideoDB offers the following search types:

# *   `SearchType.semantic`: (Default) Ideal for question-answering.
# *   `SearchType.keyword`: Matches the exact occurrence of words or sentences. Only available for single videos.

# And the following Index types:

# *   `IndexType.scene`: Searches the visual information of the video. Index the video using `index_scenes` function.
# *   `IndexType.spoken_word`: Searches the spoken information of the video. Index the video using `index_spoken_words` function.

# ```python
from videodb import SearchType, IndexType

result = video.search(
    query="what's the dream?",
    search_type=SearchType.semantic,
    index_type=IndexType.spoken_word,
)
result.play()
# ```

# ```python
# Try with different queries
# "city scene with buses"
query = "mountains"

result = video.search(
    query=query, search_type=SearchType.semantic, index_type=IndexType.scene
)
result.play()
# ```

# #### View Search Results

# `video.search()` returns a `SearchResults` object containing the sections/shots of videos that semantically match your search query.

# *   `result.get_shots()`: Returns a list of `Shot` objects that matched the search query.
# *   `result.play()`: Opens the video in your default browser/notebook, focusing on the relevant sections.

# #### ðŸ—‘ï¸ Cleanup

# You can delete the video from the database using `video.delete()`.

# ```python
video.delete()
# ```

# ## RAG: Working with Multiple Videos
# ---

# `VideoDB` can store and search across multiple videos easily. By default, videos are uploaded to your default collection, and you can create and manage multiple collections (see [Collections docs](https://docs.videodb.io/collections-68)).

# If you're an existing LlamaIndex user building a RAG pipeline on video data, you can use the VideoDB retriever. See [LlamaIndex docs](https://docs.llamaindex.ai/en/stable/examples/retrievers/videodb_retriever.html).

# #### ðŸ”„ Using Collections to Upload Multiple Videos

# ```python
# Get a collection
coll = conn.get_collection()

# Upload Videos to a collection
coll.upload(url="https://www.youtube.com/watch?v=lsODSDmY4CY")
coll.upload(url="https://www.youtube.com/watch?v=vZ4kOr38JhY")
coll.upload(url="https://www.youtube.com/watch?v=uak_dXHh6s4")
# ```

# *   `conn.get_collection()`: Returns the default `Collection` object.
# *   `coll.get_videos()`: Returns a list of `Video` objects in the collection.
# *   `coll.get_video(video_id)`: Returns the `Video` object for the given video ID.
# *   `coll.delete_video(video_id)`: Deletes the video from the collection.

# ### ðŸ“‚ Search Across Multiple Videos in a Collection

# Index all videos in a collection and use the `search` method to find relevant results. Here, we index the spoken content for a quick experiment.

# > Indexing may take time for longer videos.

# ```python
# For simplicity, we're just indexing the spoken content of each video.
for video in coll.get_videos():
    video.index_spoken_words()
    print(f"Indexed {video.name}")
# ```

# ### Search Inside a Collection

# Search across videos in a collection using `coll.search()`.

# ```python
# search in the collection of videos
results = coll.search(query="Deep sleep")
results.play()
# ```

# ```python
results = coll.search(query="What are the benefits of morning sunlight?")
results.play()
# ```

# ```python
results = coll.search(query="What are Adaptogens?")
results.play()
# ```

# #### View Search Results

# `video.search()` returns a `SearchResults` object containing the sections/shots of videos that semantically match your search query.

# *   `result.get_shots()`: Returns a list of `Shot` objects that matched the search query.
# *   `result.play()`: Opens the video in your default browser/notebook, focusing on the relevant sections.

# VideoDB fundamentally removes file limitations, empowering you to seamlessly access and stream videos. Stay tuned for exciting features in upcoming versions, and keep building awesome stuff with VideoDB! ðŸ¤˜

# ### Explore More with the Video Object

# The `Video` object has several methods useful for various use cases.

# #### Access Transcript

# ```python
# Words with timestamps
text_json = video.get_transcript()
text = video.get_transcript_text()
print(text)
# ```

# #### Access Visual Scene Descriptions

# ```python
# Take a look at the scenes
video.get_scene_index(index_id)
# ```

# #### Add Subtitle to a video

# Returns a new stream instantly with subtitles added to the video. The subtitle function has many styling parameters like font, size, and background color. See the notebook: [Subtitle Styles](https://github.com/video-db/videodb-cookbook/blob/main/guides/Subtitle.ipynb) for details.

# ```python
new_stream = video.add_subtitle()
play_stream(new_stream)
# ```

# #### Generate Thumbnail of Video

# Use `video.generate_thumbnail(time=)` to generate a thumbnail image of a video at a specific timestamp.

# ```python
from IPython.display import Image

image = video.generate_thumbnail(time=12.0)
Image(url=image.url)
# ```

# #### Delete a video

# *   `video.delete()`: Deletes a video.

# ```python
video.delete()
# ```

# See more examples and tutorials at [Build with VideoDB](https://docs.videodb.io/build-with-videodb-35) to explore the possibilities with VideoDB.
```

---

