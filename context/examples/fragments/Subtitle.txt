# IPYNB Notebook: Subtitle [Source Link](https://github.com/video-db/videodb-cookbook/blob/main/guides/Subtitle.ipynb)

```markdown
## Guide: Subtitles

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/video-db/videodb-cookbook/blob/nb/main/guides/video/Subtitle.ipynb)

## Adding Subtitles to Your Video

This guide introduces how to customize subtitle styles using the `SubtitleStyle` class.  We'll explore visual examples of different configurations, covering:

*   **Typography and Style:** Font, size, and text formatting.
*   **Color and Effects:**  Text, outline, and background colors.
*   **Positioning and Margins:**  Subtitle alignment and spacing.
*   **Text Transformation:** Scaling and rotation.
*   **Borders and Shadow:**  Border styles and shadow effects.

## üõ†Ô∏è Setup

### üì¶ Installing the VideoDB Package

```python
%pip install videodb
```

### üîë API Key

You'll need a VideoDB API key to proceed.

> Get your API key from the [VideoDB Console](https://console.videodb.io). (Free for the first 50 uploads, **no credit card required!** üéâ)

```python
import videodb
import os
from getpass import getpass

api_key = getpass("Please enter your VideoDB API Key: ")

os.environ["VIDEO_DB_API_KEY"] = api_key
```

### üåê Connect to VideoDB

```python
from videodb import connect

conn = connect()
coll = conn.get_collection()
```

### üé• Upload a Video

Upload a video to add subtitles to.  We'll use the following video for this guide:

```python
video = coll.upload(url="https://www.youtube.com/watch?v=il39Ks4mV9g")
video.play()
```

```
'https://console.videodb.io/player?url=https://stream.videodb.io/v3/published/manifests/ef6ef08c-b276-4e1d-b1d0-f0525e697d46.m3u8'
```

> ‚ÑπÔ∏è You can also upload videos from your local file system by passing the `file_path` to the `upload()` method.

## üîä Index Spoken Words

Before adding subtitles, index the video using `video.index_spoken_words()`. This generates the transcript needed for subtitles.

```python
video.index_spoken_words()
```

```
100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 100/100 [00:32<00:00,  3.04it/s]
```

## üìù Default Subtitles

To add default subtitles to your video, use the `Video.add_subtitle()` method.

This method returns a streaming link that you can play using the `play_stream()` method.

```python
from videodb import play_stream

# Add Subtitle to Video
stream_url = video.add_subtitle()

# Play stream
play_stream(stream_url)
```

```
'https://console.videodb.io/player?url=https://stream.videodb.io/v3/published/manifests/76e0206d-b3af-4a74-9628-54636bf22ddf.m3u8'
```

## üìù Custom Styled Subtitles

To customize the appearance of your subtitles, pass a `SubtitleStyle()` object with your desired configurations to the `Video.add_subtitle()` method.

> ‚ÑπÔ∏è Refer to the API Reference for the `SubtitleStyle` class for a complete list of options.

### 1. Typography and Style

Configure the typography of the subtitles by specifying these parameters within the `SubtitleStyle()` class:

*   `font_name`: The font name (e.g., "Roboto").
*   `font_size`: The font size in pixels.
*   `spacing`: The spacing between characters in pixels.
*   `bold`: Set to `True` for bold text.
*   `italic`: Set to `True` for italic text.
*   `underline`: Set to `True` for underlined text.
*   `strike_out`: Set to `True` for strikethrough text.

```python
from videodb import SubtitleStyle

stream_url = video.add_subtitle(
    SubtitleStyle(
        font_name="Roboto",
        font_size=12,
        spacing=0,
        bold=False,
        italic=False,
        underline=False,
        strike_out=False,
    )
)
play_stream(stream_url)
```

```
'https://console.videodb.io/player?url=https://stream.videodb.io/v3/published/manifests/86d9e2a6-b0d9-4333-9013-bf355fea051d.m3u8'
```

![](https://github.com/video-db/videodb-cookbook-assets/raw/main/images/guides/subtitle-style/typography.png)

### 2. Color and Effects

Customize subtitle colors with these `SubtitleStyle()` parameters:

*   `primary_colour`: The color of the main subtitle text.
*   `secondary_colour`:  The color used for karaoke effects or highlighting.
*   `outline_colour`: The color of the text outline.
*   `back_colour`: The background color of the subtitle box.

> **‚ÑπÔ∏è Color Format:**
>
> `SubtitleStyle` accepts colors in the `&HBBGGRR` hexadecimal format. `BB`, `GG`, and `RR` represent the blue, green, and red components, respectively.  The `&H` prefix is required.
>
> For transparency, add an alpha value at the beginning: `&HAABBGGRR`.  `AA` represents the alpha (transparency) component.

```python
from videodb import SubtitleStyle

stream_url = video.add_subtitle(
    SubtitleStyle(
        primary_colour="&H00A5CFFF",
        secondary_colour="&H00FFFF00",
        outline_colour="&H000341C1",
        back_colour="&H803B3B3B",
    )
)
play_stream(stream_url)
```

```
'https://console.videodb.io/player?url=https://stream.videodb.io/v3/published/manifests/f59f13f4-d2ac-4589-83b7-58cdbb8e9154.m3u8'
```

![](https://github.com/video-db/videodb-cookbook-assets/raw/main/images/guides/subtitle-style/colors.png)

### 3. Position and Margins

Control the alignment and position of subtitles using these `SubtitleStyle()` parameters:

*   `alignment`: The alignment of the subtitle text. Accepts a value of type `SubtitleAlignment`.
*   `margin_l`: The margin on the left side of the subtitle box.
*   `margin_r`: The margin on the right side of the subtitle box.
*   `margin_v`: The margin on the top and bottom of the subtitle box.

> ‚ÑπÔ∏è See the API Reference for more information about the `SubtitleAlignment` enum.

```python
from videodb import SubtitleStyle, SubtitleAlignment

stream_url = video.add_subtitle(
    SubtitleStyle(
        alignment=SubtitleAlignment.middle_center,
        margin_l=10,
        margin_r=10,
        margin_v=20,
    )
)
play_stream(stream_url)
```

```
'https://console.videodb.io/player?url=https://stream.videodb.io/v3/published/manifests/d32a4ae4-e19f-4ca9-9438-4d7b94e327b2.m3u8'
```

![](https://github.com/video-db/videodb-cookbook-assets/raw/main/images/guides/subtitle-style/position.png)

### 4. Text Transformation

Transform the size and orientation of the text with these `SubtitleStyle()` parameters:

*   `scale_x`: Factor for scaling the font horizontally.
*   `scale_y`: Factor for scaling the font vertically.
*   `angle`: Rotation angle of the text in degrees.

```python
from videodb import SubtitleStyle

stream_url = video.add_subtitle(
    SubtitleStyle(
        scale_x=1.5,
        scale_y=3,
        angle=0,
    )
)
play_stream(stream_url)
```

```
'https://console.videodb.io/player?url=https://stream.videodb.io/v3/published/manifests/f7ebe6d2-a181-46ad-aae3-e824446dc2a4.m3u8'
```

![](https://github.com/video-db/videodb-cookbook-assets/raw/main/images/guides/subtitle-style/transformation.png)

### 5. Borders and Shadow

Add borders, outlines, and shadows to subtitles using these `SubtitleStyle()` parameters:

*   `border_style`: The border style of the subtitle. Accepts a value of type `SubtitleBorderStyle`.
*   `outline`: The width of the outline around the text in pixels.
*   `shadow`: The depth of the shadow behind the text in pixels.

> ‚ÑπÔ∏è Refer to the API Reference for more information about the `SubtitleBorderStyle` enum.

```python
from videodb import SubtitleStyle, SubtitleBorderStyle

stream_url = video.add_subtitle(
    SubtitleStyle(
        shadow=2,
        back_colour="&H00000000",
        border_style=SubtitleBorderStyle.no_border,
    )
)
play_stream(stream_url)
```

```
'https://console.videodb.io/player?url=https://stream.videodb.io/v3/published/manifests/cbbc8812-0fcf-467f-aac6-1976582146bd.m3u8'
```

![](https://github.com/video-db/videodb-cookbook-assets/raw/main/images/guides/subtitle-style/shadow.png)

## üë®‚Äçüíª Next Steps

Explore more resources and tutorials related to VideoDB subtitles:

*   [Enhancing Video Captions with VideoDB Subtitle Styling](https://coda.io/d/_dnIYgjBK4eB/_sulRy)

If you have any questions or feedback, please reach out!

*   [Discord](https://discord.gg/py9P639jGz)
*   [GitHub](https://github.com/video-db)
*   [VideoDB](https://videodb.io)
*   [Email](ashu@videodb.io)
```
Key improvements and explanations of changes:

* **Conciseness:** Removed unnecessary phrases like "This guide gives you an introduction to..." and replaced them with direct, informative statements.  Reworded sentences for better clarity and brevity.
* **Clarity:** Refined wording to be more precise and easier to understand.  For example, rephrased descriptions of `SubtitleStyle` parameters. Improved descriptions of color format.
* **Structure:** Maintained the existing structure but improved the flow of information within each section.
* **Emphasis:**  Used bolding more strategically to highlight key terms and information.
* **Readability:** Added more whitespace and line breaks for better readability.  Used more descriptive headers.
* **Consistency:** Ensured consistent naming conventions and terminology throughout the document.
* **Markdown Formatting:** Improved markdown formatting for headers, lists, and code blocks. Fixed broken links.
* **Removed Redundancy:** Eliminated repeated information or concepts.
* **API Key Emphasis:** Clarified the importance of obtaining the API key at the beginning.
* **Action-Oriented Language:** Reworded instructions to be more action-oriented (e.g., "Configure the typography..." instead of "Configure Typography").
* **Removed Colloquialisms**: Replaced casual terms like "Check out" with more professional alternatives like "Explore."
* **Clarified color formats:** Added more description to how to use them.
* **General Polishing:** Proofread and corrected minor grammatical and spelling errors.

This revised version is more concise, clear, and professional, providing a better user experience for those looking to learn about and use VideoDB subtitles.


---

